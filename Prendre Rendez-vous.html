<!DOCTYPE html>
<html lang="fr">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Prendre Rendez-vous</title>
    <link rel="stylesheet" href="styles/prendre-rendez-vous.css">
</head>
<body>
    <div class="main-container">
        <!-- Left Panel -->
        <div class="left-panel">
            <button class="action-btn">Choisir le M√©decin</button>
            <button class="action-btn">Consulter Mon Carnet de Sant√©</button>
            <button class="action-btn">Informations du Rendez-vous</button>
            <!--<button class="action-btn">Valider le Rendez-vous</button>  -->

            <!-- Modal Structure inside Left Panel -->
            <div id="modal" class="modal">
                <fieldset class="modal-fieldset">
                    <legend id="modal-title" class="modal-legend">Titre</legend>
                    <div class="modal-content">
                        <p id="modal-text">Contenu du pop-up...</p>
                    </div>
                </fieldset>
            </div>
        </div>

        <div class="vertical-separator"></div>

        <!-- Right Panel -->
        <div class="right-panel">
            <div class="date-selector">
                <input type="text" class="date-input" placeholder="HH:MM" value="HH:MM">
                <input type="text" class="date-input" placeholder="DD / MM / YYYY" value="DD / MM / YYYY">
                <span class="calendar-icon">üìÖ</span>
            </div>

            <div class="calendar-container">
                <div class="calendar-header">
                    <span>‚óÑ</span>
                    <span>NOVEMBER 2025</span>
                    <span>‚ñ∫</span>
                </div>
                <div class="calendar-grid">
                    <div class="day-name">S</div>
                    <div class="day-name">M</div>
                    <div class="day-name">T</div>
                    <div class="day-name">W</div>
                    <div class="day-name">T</div>
                    <div class="day-name">F</div>
                    <div class="day-name">S</div>

                    <!-- Week 1 -->
                    <div class="calendar-cell"><span class="date-number" style="color: #ccc;">30</span></div>
                    <div class="calendar-cell"><span class="date-number">1</span></div>
                    <div class="calendar-cell"><span class="date-number">2</span></div>
                    <div class="calendar-cell"><span class="date-number">3</span></div>
                    <div class="calendar-cell"><span class="date-number selected-date">4</span></div>
                    <div class="calendar-cell"><span class="date-number">5</span></div>
                    <div class="calendar-cell"><span class="date-number">6</span></div>

                    <!-- Week 2 -->
                    <div class="calendar-cell"><span class="date-number">7</span></div>
                    <div class="calendar-cell"><span class="date-number">8</span></div>
                    <div class="calendar-cell"><span class="date-number">9</span></div>
                    <div class="calendar-cell"><span class="date-number">10</span></div>
                    <div class="calendar-cell"><span class="date-number">11</span></div>
                    <div class="calendar-cell"><span class="date-number">12</span></div>
                    <div class="calendar-cell"><span class="date-number">13</span></div>

                    <!-- Week 3 -->
                    <div class="calendar-cell"><span class="date-number">14</span></div>
                    <div class="calendar-cell"><span class="date-number">15</span></div>
                    <div class="calendar-cell"><span class="date-number">16</span></div>
                    <div class="calendar-cell"><span class="date-number">17</span></div>
                    <div class="calendar-cell"><span class="date-number">18</span></div>
                    <div class="calendar-cell"><span class="date-number">19</span></div>
                    <div class="calendar-cell"><span class="date-number">20</span></div>

                    <!-- Week 4 -->
                    <div class="calendar-cell"><span class="date-number">21</span></div>
                    <div class="calendar-cell"><span class="date-number">22</span></div>
                    <div class="calendar-cell"><span class="date-number">23</span></div>
                    <div class="calendar-cell"><span class="date-number">24</span></div>
                    <div class="calendar-cell"><span class="date-number">25</span></div>
                    <div class="calendar-cell"><span class="date-number">26</span></div>
                    <div class="calendar-cell"><span class="date-number">27</span></div>

                    <!-- Week 5 -->
                    <div class="calendar-cell"><span class="date-number">28</span></div>
                    <div class="calendar-cell"><span class="date-number">29</span></div>
                    <div class="calendar-cell"><span class="date-number">30</span></div>
                    <div class="calendar-cell"><span class="date-number">31</span></div>
                    <div class="calendar-cell"><span class="date-number" style="color: #ccc;">1</span></div>
                    <div class="calendar-cell"><span class="date-number" style="color: #ccc;">2</span></div>
                    <div class="calendar-cell"><span class="date-number" style="color: #ccc;">3</span></div>
                    
                    <!-- Week 6 -->
                    <div class="calendar-cell"><span class="date-number" style="color: #ccc;">4</span></div>
                    <div class="calendar-cell"><span class="date-number" style="color: #ccc;">5</span></div>
                    <div class="calendar-cell"><span class="date-number" style="color: #ccc;">6</span></div>
                    <div class="calendar-cell"><span class="date-number" style="color: #ccc;">7</span></div>
                    <div class="calendar-cell"><span class="date-number" style="color: #ccc;">8</span></div>
                    <div class="calendar-cell"><span class="date-number" style="color: #ccc;">9</span></div>
                    <div class="calendar-cell"><span class="date-number" style="color: #ccc;">10</span></div>
                </div>
            </div>
            <div class="confirm-container">
                <button class="confirm-btn">Confirmer</button>
            </div>
        </div>
    </div>

    <!-- Templates for Modal Content (Hidden) -->
    <div id="template-choisir-medecin" style="display: none;">
        <div class="filter-container">
            <select id="doctor-category-select" class="doctor-select">
                <option value="">Choisir le type de sp√©cialiste</option>
                <option value="generaliste">M√©decin g√©n√©raliste</option>
                <option value="kine">Kin√©</option>
                <option value="dentiste">Dentiste</option>
            </select>
        </div>
        <div id="doctor-list-container" class="doctor-list">
            <p style="text-align: center; color: #666; margin-top: 50px;">Veuillez s√©lectionner un type de m√©decin pour voir la liste.</p>
        </div>
    </div>

    <div id="template-info-rdv" style="display: none;">
        <div class="info-rdv-content">
            <span class="info-rdv-title">Rendez-vous:</span>
            
            <p>
                <strong><span id="info-doc-name">Docteur ...</span></strong><br>
                <span id="info-doc-address">Rue ..., 64120 Bidart</span>
            </p>
            
            <p>
                Le <span id="info-date">DD/MM/YYYY</span><br>
                A <span id="info-time">HH:MN</span>
            </p>
            
            <br>
            <p>
                Merci d'arriver 15 minutes avant votre rendez-vous afin de vous pr√©senter √† l'accueil.
            </p>
        </div>
    </div>

    <script>
        // Get the modal
        var modal = document.getElementById("modal");
        var modalTitle = document.getElementById("modal-title");
        var modalText = document.getElementById("modal-text"); // This is the container for content

        // Get the buttons that opens the modal
        var btns = document.getElementsByClassName("action-btn");

        // Get the confirm button
        var confirmBtn = document.getElementsByClassName("confirm-btn")[0];

        // State for selected doctor
        var selectedDoctor = {
            name: "Docteur ...",
            address: "Rue ..., 64120 Bidart"
        };

        // Data for doctors (10 per category)
        var doctorsData = {
            "generaliste": [
                { name: "Dr. Martin", address: "Rue des Lilas, 64120 Bidart" },
                { name: "Dr. Dupont", address: "Avenue de la Plage, 64120 Bidart" },
                { name: "Dr. Durand", address: "Place de la Mairie, 64120 Bidart" },
                { name: "Dr. Leroy", address: "Boulevard des Pyr√©n√©es, 64120 Bidart" },
                { name: "Dr. Moreau", address: "Rue de la Gare, 64120 Bidart" },
                { name: "Dr. Simon", address: "All√©e des Fleurs, 64120 Bidart" },
                { name: "Dr. Laurent", address: "Chemin du Moulin, 64120 Bidart" },
                { name: "Dr. Michel", address: "Route de Bayonne, 64120 Bidart" },
                { name: "Dr. Garcia", address: "Avenue Kennedy, 64120 Bidart" },
                { name: "Dr. Thomas", address: "Rue Victor Hugo, 64120 Bidart" }
            ],
            "kine": [
                { name: "Mme. Petit", address: "Rue du Centre, 64120 Bidart" },
                { name: "M. Roux", address: "Avenue de la Mer, 64120 Bidart" },
                { name: "Mme. Blanc", address: "Place du March√©, 64120 Bidart" },
                { name: "M. Garnier", address: "Rue des √âcoles, 64120 Bidart" },
                { name: "Mme. Faure", address: "Boulevard des Plages, 64120 Bidart" },
                { name: "M. Lambert", address: "Chemin de la For√™t, 64120 Bidart" },
                { name: "Mme. Girard", address: "Rue du Port, 64120 Bidart" },
                { name: "M. Dupuis", address: "All√©e des Pins, 64120 Bidart" },
                { name: "Mme. Bonnet", address: "Route de Biarritz, 64120 Bidart" },
                { name: "M. Rousseau", address: "Avenue de l'Oc√©an, 64120 Bidart" }
            ],
            "dentiste": [
                { name: "Dr. Bernard", address: "Rue Saint-Jean, 64120 Bidart" },
                { name: "Dr. Dubois", address: "Place Royale, 64120 Bidart" },
                { name: "Dr. Robert", address: "Avenue Foch, 64120 Bidart" },
                { name: "Dr. Richard", address: "Rue Gambetta, 64120 Bidart" },
                { name: "Dr. Guerin", address: "Boulevard Thiers, 64120 Bidart" },
                { name: "Dr. Vallet", address: "Chemin des Dames, 64120 Bidart" },
                { name: "Dr. Morin", address: "Rue du Ch√¢teau, 64120 Bidart" },
                { name: "Dr. Brun", address: "All√©e du Parc, 64120 Bidart" },
                { name: "Dr. Cote", address: "Route Nationale, 64120 Bidart" },
                { name: "Dr. Picard", address: "Avenue de la R√©publique, 64120 Bidart" }
            ]
        };

        // Function to handle doctor selection
        function selectDoctor(element, name, address) {
            // Remove selected class from all cards
            var cards = document.getElementsByClassName("doctor-card");
            for (var i = 0; i < cards.length; i++) {
                cards[i].classList.remove("selected");
            }
            // Add selected class to clicked card
            element.classList.add("selected");
            
            // Update state
            selectedDoctor.name = name;
            selectedDoctor.address = address;
        }

        // Function to render doctor list based on category
        function renderDoctors(category) {
            var container = document.getElementById("doctor-list-container");
            if (!container) return; // Safety check
            
            container.innerHTML = ""; // Clear

            if (!category || !doctorsData[category]) {
                container.innerHTML = '<p style="text-align: center; color: #666; margin-top: 50px;">Veuillez s√©lectionner un type de m√©decin pour voir la liste.</p>';
                return;
            }

            var list = doctorsData[category];
            for (var i = 0; i < list.length; i++) {
                var doc = list[i];
                var card = document.createElement("div");
                card.className = "doctor-card";
                if (selectedDoctor.name === doc.name) {
                    card.classList.add("selected");
                }
                
                // Create content
                var content = '<div><strong>' + doc.name + '</strong><br>' + doc.address + '</div>';
                card.innerHTML = content;
                
                // Add click event closure
                (function(d, c) {
                    c.onclick = function() {
                        selectDoctor(c, d.name, d.address);
                    };
                })(doc, card);
                
                container.appendChild(card);
            }
        }

        // Loop through buttons to add click event
        for (var i = 0; i < btns.length; i++) {
            btns[i].onclick = function() {
                modal.style.display = "block";
                // Remove the arrow character for the title
                var text = this.innerText.replace('‚ñº', '').trim();
                modalTitle.innerText = text;

                // Clear previous content
                modalText.innerHTML = "";

                if (text === "Choisir le M√©decin") {
                    var template = document.getElementById("template-choisir-medecin").innerHTML;
                    modalText.innerHTML = template;
                    
                    // Add event listener to the select element
                    var select = document.getElementById("doctor-category-select");
                    if (select) {
                        select.onchange = function() {
                            renderDoctors(this.value);
                        };
                    }
                    
                    // If we wanted to restore the view of the selected doctor's category, we'd need more state logic.
                    // For now, it starts fresh as requested.

                } else if (text === "Informations du Rendez-vous") {
                    var template = document.getElementById("template-info-rdv").innerHTML;
                    modalText.innerHTML = template;
                    
                    // Update info with selected doctor
                    document.getElementById("info-doc-name").innerText = selectedDoctor.name;
                    document.getElementById("info-doc-address").innerText = selectedDoctor.address;
                    
                    // Here we could also update date/time if we had logic for that
                } else {
                    modalText.innerText = "D√©tails pour : " + text;
                }
            }
        }
        
        // When the user clicks on confirm, close the modal
        confirmBtn.onclick = function() {
            modal.style.display = "none";
        }
    </script>
</body>
</html>